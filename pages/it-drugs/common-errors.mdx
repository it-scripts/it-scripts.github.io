---
title: it-drugs - Common Errors
description: Common errors and their solutions
---
import { Callout } from '@components/Callout'
import { Steps, Cards, Card } from 'nextra/components'
import ExternLink from '@components/ExternLink'
import { IconBrandGithub, IconBrandDiscord, IconCode, IconTag } from '@tabler/icons-react';

# Common Errors
Here you will find common errors and their solutions. If you have any further questions, please feel free to ask in the [Discord](https://discord.it-scripts.com).

<Callout type="info">
This page is still under construction.
If you have any errors that are not listed here, please let us know in the [Discord](https://discord.it-scripts.com).
</Callout>

## General Errors

```ansi
[1m [31mattempt to index a nil value (global 'lib')[39m[22m
```
If you get this error you either don't have [ox_lib](https://github.com/overextended/ox_lib) installed on your server or you start it after the it-drugs script.
Make sure to start the ox_lib script before the it-drugs script.

## Database Errors
```ansi
[1m [31mError: it-drugs was unable to execute query![39m[22m
```
If you get this error, it means that the script was unable to execute a query on the database.
This can have multiple reasons, but the most commons are:
- You still running version 1.2.4 of the script. [Update now](https://docs.it-scripts.com/it-drugs/update#v124-to-13x)
- You updated the script from 1.2.4 to 1.3.x and didn't update the database. To fix this you can run the following SQL query:
    ```sql copy
    -- Delete the drug_plants table
    DROP TABLE IF EXISTS drug_plants;
    -- Delete the drug_processing table
    DROP TABLE IF EXISTS drug_processing;
    ```

---
### Any other databse error
If you get any other database error, please make sure that you are using the latest version of the script.

<Cards>
  <Card icon={<IconBrandGithub />} title="GitHub" href="https://github.com/it-scripts/it-drugs" />
  <Card icon={<IconTag />} title="Releases" href="https://github.com/it-scripts/it-drugs/releases" />
</Cards>

If you are using the latest version of the script, please let us know in the [Discord](https://discord.it-scripts.com).


## Animation Error
### Missing Animation
```ansi
[1m [31mattempt to index a nil value (field 'animation')
```

If you get this error that means you are using **1.2.4** of the script. 
We would recommend updating to the latest version of the script. This will fix the error.
<ExternLink href="https://docs.it-scripts.com/it-drugs/update#v124-to-13x"></ExternLink>

However, if you want to fix it manually, you can do the following:

<Steps>
### Open the `config.lua` file.
### Search for `Config.ProcessingTables`.
### Add the following lines to every recipe in every processing tables:
```lua
animation = {
    dict = 'anim@gangops@facility@servers@bodysearch@',
    anim = 'player_search',
},
```
</Steps>

## Planting Errors

```ansi
[1m [31m[ERROR] [getPlantByNetId] - Plant with netId: 0 does not exists![39m[22m
```

If you get this error, it means that the script was unable to find the plant with the given netId.
In most cases, this error occurs when a player try to interact with a plant that is not managed by the script.
So in most cases you can ignore this error.

## Selling Errors
### Can't sell drugs to npc

If yoo can't sell drugs to a NPC make sure your are in on of the zones that are defined in the `Config.SellZones` in the `config.lua` file.
If you are in one of the zones and still can't sell drugs to the NPC, please make sure that you are using the latest version of the script.
Also you can enable `Config.ManualZoneChecker` in the `config.lua` file to check the zones manually.